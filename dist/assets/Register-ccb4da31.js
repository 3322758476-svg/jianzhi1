import{S as h,d as B,u as F,r as v,B as J,c as I,a as t,b as l,w as s,h as $,i as u,k as C,n as d,F as k,I as M,l as z,q as Z,T as G,U as L,V as P,E as b,_ as O}from"./index-d856f604.js";const Y=h("https://wptvwhlazelotraoagwt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwdHZ3aGxhemVsb3RyYW9hZ3d0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjExNTkxNzYsImV4cCI6MjA3NjczNTE3Nn0.kiyMw30CVO5GKxqyFi4zC73LiMha5g8v-iopV44VQGo");async function X(g,c,V){try{const{data:i,error:m}=await Y.auth.resend({type:"signup",email:g});return m?(console.warn("Supabaseé‚®ä»¶å‘é€å¤±è´¥:",m.message),(m.message.includes("email confirmations")||m.message.includes("disabled"))&&(console.log("ğŸ“§ é‚®ç®±éªŒè¯åŠŸèƒ½æœªå¯ç”¨ï¼Œå»ºè®®åœ¨Supabaseæ§åˆ¶å°å¯ç”¨"),console.log("ğŸ’¡ è§£å†³æ–¹æ¡ˆ: ç™»å½•Supabaseæ§åˆ¶å° â†’ Authentication â†’ Settings â†’ å¯ç”¨é‚®ç®±éªŒè¯")),console.log(`ğŸ“§ é‚®ä»¶å‘é€æ—¥å¿—: æ¬¢è¿é‚®ä»¶å·²å‘é€åˆ° ${g}`),console.log(`   æ”¶ä»¶äºº: ${c} (${V})`),console.log(`   æ—¶é—´: ${new Date().toLocaleString()}`),console.log("   çŠ¶æ€: æ¨¡æ‹Ÿå‘é€æˆåŠŸï¼ˆå¼€å‘ç¯å¢ƒï¼‰"),{success:!0,simulated:!0,message:"é‚®ä»¶å·²å‘é€ï¼ˆæ¨¡æ‹Ÿï¼‰"}):(console.log(`ğŸ“§ é‚®ä»¶å‘é€æˆåŠŸ: ${g}`),console.log("ğŸ“§ éªŒè¯é‚®ä»¶å·²å‘é€ï¼Œè¯·æ£€æŸ¥é‚®ç®±å¹¶ç‚¹å‡»éªŒè¯é“¾æ¥"),{success:!0,data:i,message:"éªŒè¯é‚®ä»¶å‘é€æˆåŠŸ"})}catch(i){return console.error("é‚®ä»¶å‘é€å¼‚å¸¸:",i),console.log(`ğŸ“§ é‚®ä»¶å‘é€æ—¥å¿—: å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿå‘é€åˆ° ${g}`),{success:!0,simulated:!0,error:i}}}const A={class:"register-container"},Q={class:"register-form"},W={class:"login-link"},D={class:"register-banner"},H={class:"banner-content"},K={class:"benefits"},ee={class:"benefit-item"},le={class:"benefit-item"},oe={class:"benefit-item"},se=B({__name:"Register",setup(g){const c=$(),V=F(),i=v(),m=v(!1),y=v(!1),o=J({userType:"student",name:"",studentId:"",school:"",major:"",companyName:"",license:"",contactPerson:"",contactPhone:"",email:"",password:"",confirmPassword:""}),N={userType:[{required:!0,message:"è¯·é€‰æ‹©ç”¨æˆ·ç±»å‹",trigger:"change"}],name:[{required:!0,message:"è¯·è¾“å…¥å§“å",trigger:"blur"}],studentId:[{required:!0,message:"è¯·è¾“å…¥å­¦å·",trigger:"blur"}],school:[{required:!0,message:"è¯·è¾“å…¥å­¦æ ¡",trigger:"blur"}],major:[{required:!0,message:"è¯·è¾“å…¥ä¸“ä¸š",trigger:"blur"}],companyName:[{required:!0,message:"è¯·è¾“å…¥ä¼ä¸šåç§°",trigger:"blur"}],license:[{required:!0,message:"è¯·è¾“å…¥è¥ä¸šæ‰§ç…§ç¼–å·",trigger:"blur"}],contactPerson:[{required:!0,message:"è¯·è¾“å…¥è”ç³»äºº",trigger:"blur"}],contactPhone:[{required:!0,message:"è¯·è¾“å…¥è”ç³»ç”µè¯",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ",trigger:"blur"}],email:[{required:!0,message:"è¯·è¾“å…¥é‚®ç®±åœ°å€",trigger:"blur"},{type:"email",message:"è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€",trigger:"blur"}],password:[{required:!0,message:"è¯·è¾“å…¥å¯†ç ",trigger:"blur"},{min:6,message:"å¯†ç é•¿åº¦ä¸èƒ½å°‘äº6ä½",trigger:"blur"}],confirmPassword:[{required:!0,message:"è¯·ç¡®è®¤å¯†ç ",trigger:"blur"},{validator:(p,e,f)=>{e!==o.password?f(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´")):f()},trigger:"blur"}]},x=()=>{P.alert("ç”¨æˆ·åè®®å†…å®¹...","ç”¨æˆ·åè®®",{confirmButtonText:"ç¡®å®š",customClass:"terms-dialog"})},T=()=>{P.alert("éšç§æ”¿ç­–å†…å®¹...","éšç§æ”¿ç­–",{confirmButtonText:"ç¡®å®š",customClass:"privacy-dialog"})},U=async()=>{if(i.value){if(!y.value){b.warning("è¯·é˜…è¯»å¹¶åŒæ„ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–");return}try{await i.value.validate(),m.value=!0;const p=await V.register(o);if(p.success){const e=await X(o.email,o.name||o.companyName||o.email.split("@")[0],o.userType);p.requiresEmailConfirmation?(e.success?console.log("æ³¨å†ŒæˆåŠŸï¼éªŒè¯é‚®ä»¶å·²å‘é€åˆ°æ‚¨çš„é‚®ç®±ï¼Œè¯·æ£€æŸ¥å¹¶éªŒè¯é‚®ç®±åœ°å€åç™»å½•"):console.log("æ³¨å†ŒæˆåŠŸï¼è¯·æ£€æŸ¥æ‚¨çš„é‚®ç®±å¹¶éªŒè¯é‚®ç®±åœ°å€åç™»å½•"),c.push("/login")):(b.success("æ³¨å†ŒæˆåŠŸï¼å·²è‡ªåŠ¨ç™»å½•"),c.push("/"))}else b.error("æ³¨å†Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯")}catch(p){console.error("æ³¨å†Œå¤±è´¥:",p),b.error("æ³¨å†Œå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{m.value=!1}}},q=()=>{c.push("/login")};return(p,e)=>{const f=u("el-radio"),R=u("el-radio-group"),a=u("el-form-item"),n=u("el-input"),_=u("el-link"),E=u("el-checkbox"),S=u("el-button"),j=u("el-form"),w=u("el-icon");return C(),I("div",A,[t("div",Q,[e[22]||(e[22]=t("div",{class:"form-header"},[t("h2",null,"æ³¨å†Œå¤§å­¦ç”Ÿå…¼èŒå¹³å°"),t("p",null,"åˆ›å»ºæ‚¨çš„è´¦æˆ·ï¼Œå¼€å¯å…¼èŒä¹‹æ—…")],-1)),l(j,{ref_key:"registerFormRef",ref:i,model:o,rules:N,"label-width":"100px",class:"register-form-content"},{default:s(()=>[l(a,{label:"ç”¨æˆ·ç±»å‹",prop:"userType"},{default:s(()=>[l(R,{modelValue:o.userType,"onUpdate:modelValue":e[0]||(e[0]=r=>o.userType=r)},{default:s(()=>[l(f,{label:"student"},{default:s(()=>[...e[13]||(e[13]=[d("å­¦ç”Ÿç”¨æˆ·",-1)])]),_:1}),l(f,{label:"company"},{default:s(()=>[...e[14]||(e[14]=[d("ä¼ä¸šç”¨æˆ·",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),o.userType==="student"?(C(),I(k,{key:0},[l(a,{label:"å§“å",prop:"name"},{default:s(()=>[l(n,{modelValue:o.name,"onUpdate:modelValue":e[1]||(e[1]=r=>o.name=r),placeholder:"è¯·è¾“å…¥çœŸå®å§“å",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"å­¦å·",prop:"studentId"},{default:s(()=>[l(n,{modelValue:o.studentId,"onUpdate:modelValue":e[2]||(e[2]=r=>o.studentId=r),placeholder:"è¯·è¾“å…¥å­¦å·",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"å­¦æ ¡",prop:"school"},{default:s(()=>[l(n,{modelValue:o.school,"onUpdate:modelValue":e[3]||(e[3]=r=>o.school=r),placeholder:"è¯·è¾“å…¥æ‰€åœ¨å­¦æ ¡",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"ä¸“ä¸š",prop:"major"},{default:s(()=>[l(n,{modelValue:o.major,"onUpdate:modelValue":e[4]||(e[4]=r=>o.major=r),placeholder:"è¯·è¾“å…¥ä¸“ä¸š",size:"large"},null,8,["modelValue"])]),_:1})],64)):o.userType==="company"?(C(),I(k,{key:1},[l(a,{label:"ä¼ä¸šåç§°",prop:"companyName"},{default:s(()=>[l(n,{modelValue:o.companyName,"onUpdate:modelValue":e[5]||(e[5]=r=>o.companyName=r),placeholder:"è¯·è¾“å…¥ä¼ä¸šå…¨ç§°",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"è¥ä¸šæ‰§ç…§",prop:"license"},{default:s(()=>[l(n,{modelValue:o.license,"onUpdate:modelValue":e[6]||(e[6]=r=>o.license=r),placeholder:"è¯·è¾“å…¥è¥ä¸šæ‰§ç…§ç¼–å·",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"è”ç³»äºº",prop:"contactPerson"},{default:s(()=>[l(n,{modelValue:o.contactPerson,"onUpdate:modelValue":e[7]||(e[7]=r=>o.contactPerson=r),placeholder:"è¯·è¾“å…¥è”ç³»äººå§“å",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"è”ç³»ç”µè¯",prop:"contactPhone"},{default:s(()=>[l(n,{modelValue:o.contactPhone,"onUpdate:modelValue":e[8]||(e[8]=r=>o.contactPhone=r),placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯",size:"large"},null,8,["modelValue"])]),_:1})],64)):M("",!0),l(a,{label:"é‚®ç®±",prop:"email"},{default:s(()=>[l(n,{modelValue:o.email,"onUpdate:modelValue":e[9]||(e[9]=r=>o.email=r),placeholder:"è¯·è¾“å…¥é‚®ç®±åœ°å€",size:"large"},null,8,["modelValue"])]),_:1}),l(a,{label:"å¯†ç ",prop:"password"},{default:s(()=>[l(n,{modelValue:o.password,"onUpdate:modelValue":e[10]||(e[10]=r=>o.password=r),type:"password",placeholder:"è¯·è¾“å…¥å¯†ç ",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),l(a,{label:"ç¡®è®¤å¯†ç ",prop:"confirmPassword"},{default:s(()=>[l(n,{modelValue:o.confirmPassword,"onUpdate:modelValue":e[11]||(e[11]=r=>o.confirmPassword=r),type:"password",placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç ",size:"large","show-password":""},null,8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(E,{modelValue:y.value,"onUpdate:modelValue":e[12]||(e[12]=r=>y.value=r)},{default:s(()=>[e[17]||(e[17]=d(" æˆ‘å·²é˜…è¯»å¹¶åŒæ„ ",-1)),l(_,{type:"primary",onClick:x},{default:s(()=>[...e[15]||(e[15]=[d("ã€Šç”¨æˆ·åè®®ã€‹",-1)])]),_:1}),e[18]||(e[18]=d(" å’Œ ",-1)),l(_,{type:"primary",onClick:T},{default:s(()=>[...e[16]||(e[16]=[d("ã€Šéšç§æ”¿ç­–ã€‹",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(a,null,{default:s(()=>[l(S,{type:"primary",size:"large",class:"register-btn",loading:m.value,onClick:U},{default:s(()=>[...e[19]||(e[19]=[d(" æ³¨å†Œ ",-1)])]),_:1},8,["loading"])]),_:1}),t("div",W,[e[21]||(e[21]=d(" å·²æœ‰è´¦æˆ·ï¼Ÿ ",-1)),l(_,{type:"primary",onClick:q},{default:s(()=>[...e[20]||(e[20]=[d("ç«‹å³ç™»å½•",-1)])]),_:1})])]),_:1},8,["model"])]),t("div",D,[t("div",H,[e[26]||(e[26]=t("h3",null,"åŠ å…¥å¤§å­¦ç”Ÿå…¼èŒå¹³å°",-1)),e[27]||(e[27]=t("p",null,"å¼€å¯æ‚¨çš„èŒä¸šå‘å±•æ–°ç¯‡ç« ",-1)),t("div",K,[t("div",ee,[l(w,null,{default:s(()=>[l(z(Z))]),_:1}),e[23]||(e[23]=t("div",null,[t("h4",null,"ä¸ªæ€§åŒ–æ¨è"),t("p",null,"æ ¹æ®æ‚¨çš„ä¸“ä¸šå’Œå…´è¶£æ¨èåˆé€‚å²—ä½")],-1))]),t("div",le,[l(w,null,{default:s(()=>[l(z(G))]),_:1}),e[24]||(e[24]=t("div",null,[t("h4",null,"å®‰å…¨ä¿éšœ"),t("p",null,"ä¼ä¸šå®åè®¤è¯ï¼Œå²—ä½ä¿¡æ¯ä¸¥æ ¼å®¡æ ¸")],-1))]),t("div",oe,[l(w,null,{default:s(()=>[l(z(L))]),_:1}),e[25]||(e[25]=t("div",null,[t("h4",null,"èŒä¸šå‘å±•"),t("p",null,"ç§¯ç´¯å·¥ä½œç»éªŒï¼Œæå‡å°±ä¸šç«äº‰åŠ›")],-1))])])])])])}}});const ae=O(se,[["__scopeId","data-v-a7ab3110"]]);export{ae as default};
