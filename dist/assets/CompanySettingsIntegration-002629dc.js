import{d as F,r as u,C as K,o as j,c as d,a as e,F as V,e as C,b as o,w as c,n as m,t as r,E as _,i as a,k as i,P as U,p as Z,Z as q,I as G,_ as H}from"./index-d856f604.js";const J={class:"company-settings-integration"},O={class:"integration-container"},Q={class:"integrations-list"},X={class:"integration-section"},Y={class:"integration-cards"},ee={class:"card-header"},te={class:"integration-icon"},le={class:"integration-info"},se={class:"integration-status"},oe={key:0,class:"integration-config"},ne={class:"config-section"},ae={class:"config-fields"},ie={class:"integration-actions"},de={class:"integration-logs"},ce={class:"logs-container"},re={class:"logs-filter"},ue={class:"logs-list"},pe={class:"log-time"},me={class:"log-content"},_e={class:"log-message"},ve={class:"log-details"},ge={class:"log-type"},be={class:"api-documentation"},he={class:"api-section"},ye={class:"api-info"},fe={class:"api-example"},ke=F({__name:"CompanySettingsIntegration",setup(we){const x=u([{id:"webhook",name:"Webhook 集成",description:"通过 Webhook 接收系统事件通知",icon:"Connection",enabled:!1,fields:[{name:"webhookUrl",label:"Webhook URL",type:"text",placeholder:"请输入接收事件的 URL",value:""},{name:"secret",label:"密钥",type:"password",placeholder:"请输入签名密钥",value:""}]},{id:"notification",name:"通知集成",description:"集成邮件、短信等通知服务",icon:"Bell",enabled:!1,fields:[{name:"emailServer",label:"邮件服务器",type:"text",placeholder:"SMTP 服务器地址",value:""},{name:"smsProvider",label:"短信服务商",type:"text",placeholder:"短信服务商配置",value:""}]},{id:"messaging",name:"消息集成",description:"集成即时通讯工具",icon:"Message",enabled:!1,fields:[{name:"webhookToken",label:"Webhook Token",type:"password",placeholder:"请输入 Webhook Token",value:""}]},{id:"document",name:"文档集成",description:"集成文档管理系统",icon:"Document",enabled:!1,fields:[{name:"apiKey",label:"API Key",type:"password",placeholder:"请输入 API Key",value:""}]}]),v=u([{id:1,time:new Date("2024-01-15 10:30:00"),type:"success",message:"Webhook 集成测试成功",details:"连接正常，事件推送测试通过"},{id:2,time:new Date("2024-01-15 09:15:00"),type:"error",message:"通知集成配置错误",details:"SMTP 服务器连接失败"},{id:3,time:new Date("2024-01-14 16:45:00"),type:"warning",message:"消息集成连接超时",details:"Webhook 响应时间超过阈值"}]),D=u([{event:"job.created",description:"岗位创建事件",enabled:!0},{event:"job.updated",description:"岗位更新事件",enabled:!0},{event:"application.submitted",description:"申请提交事件",enabled:!0},{event:"application.status_changed",description:"申请状态变更事件",enabled:!1}]),g=u("all"),p=u([]),T=u("https://api.example.com/webhook/your-token"),I=K(()=>{let s=v.value;if(g.value!=="all"&&(s=s.filter(t=>t.type===g.value)),p.value&&p.value.length===2){const[t,f]=p.value;s=s.filter(b=>{const h=b.time.getTime();return h>=t.getTime()&&h<=f.getTime()})}return s}),$=s=>{s.enabled?console.log(`${s.name} 已启用`):console.log(`${s.name} 已禁用`)},W=s=>{_.success(`${s.name} 配置已保存`),v.value.unshift({id:Date.now(),time:new Date,type:"success",message:`${s.name} 配置保存成功`,details:"配置信息已更新到系统"})},L=s=>{_.info(`正在测试 ${s.name} 连接...`),setTimeout(()=>{Math.random()>.3?(_.success(`${s.name} 连接测试成功`),v.value.unshift({id:Date.now(),time:new Date,type:"success",message:`${s.name} 连接测试成功`,details:"连接正常，配置正确"})):(_.error(`${s.name} 连接测试失败`),v.value.unshift({id:Date.now(),time:new Date,type:"error",message:`${s.name} 连接测试失败`,details:"请检查配置信息是否正确"}))},1e3)},S=()=>{navigator.clipboard.writeText(T.value),_.success("Webhook URL 已复制到剪贴板")},P=s=>s.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),M=s=>{switch(s){case"success":return"success";case"error":return"danger";case"warning":return"warning";default:return"info"}},z=s=>{switch(s){case"success":return"成功";case"error":return"错误";case"warning":return"警告";default:return"信息"}};return j(()=>{console.log("系统集成页面初始化完成")}),(s,t)=>{const f=a("el-icon"),b=a("el-switch"),h=a("el-input"),k=a("el-button"),y=a("el-option"),B=a("el-select"),N=a("el-date-picker"),R=a("el-tag"),w=a("el-table-column"),E=a("el-table");return i(),d("div",J,[t[12]||(t[12]=e("div",{class:"page-header"},[e("h1",null,"系统集成"),e("p",null,"配置和管理第三方系统集成")],-1)),e("div",O,[e("div",Q,[e("div",X,[t[5]||(t[5]=e("h2",null,"可用集成",-1)),e("div",Y,[(i(!0),d(V,null,C(x.value,l=>(i(),d("div",{key:l.id,class:U(["integration-card",{active:l.enabled}])},[e("div",ee,[e("div",te,[o(f,null,{default:c(()=>[(i(),Z(q(l.icon)))]),_:2},1024)]),e("div",le,[e("h3",null,r(l.name),1),e("p",null,r(l.description),1)]),e("div",se,[o(b,{modelValue:l.enabled,"onUpdate:modelValue":n=>l.enabled=n,onChange:n=>$(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])]),l.enabled?(i(),d("div",oe,[e("div",ne,[t[2]||(t[2]=e("h4",null,"配置信息",-1)),e("div",ae,[(i(!0),d(V,null,C(l.fields,n=>(i(),d("div",{key:n.name,class:"config-field"},[e("label",null,r(n.label),1),o(h,{modelValue:n.value,"onUpdate:modelValue":A=>n.value=A,type:n.type,placeholder:n.placeholder},null,8,["modelValue","onUpdate:modelValue","type","placeholder"])]))),128))])]),e("div",ie,[o(k,{type:"primary",size:"small",onClick:n=>W(l)},{default:c(()=>[...t[3]||(t[3]=[m(" 保存配置 ",-1)])]),_:1},8,["onClick"]),o(k,{size:"small",onClick:n=>L(l)},{default:c(()=>[...t[4]||(t[4]=[m(" 测试连接 ",-1)])]),_:1},8,["onClick"])])])):G("",!0)],2))),128))])]),e("div",de,[t[6]||(t[6]=e("h2",null,"集成日志",-1)),e("div",ce,[e("div",re,[o(B,{modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=l=>g.value=l),placeholder:"筛选日志类型"},{default:c(()=>[o(y,{label:"全部",value:"all"}),o(y,{label:"成功",value:"success"}),o(y,{label:"错误",value:"error"}),o(y,{label:"警告",value:"warning"})]),_:1},8,["modelValue"]),o(N,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=l=>p.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),e("div",ue,[(i(!0),d(V,null,C(I.value,l=>(i(),d("div",{key:l.id,class:U(["log-item",l.type])},[e("div",pe,r(P(l.time)),1),e("div",me,[e("div",_e,r(l.message),1),e("div",ve,r(l.details),1)]),e("div",ge,[o(R,{type:M(l.type),size:"small"},{default:c(()=>[m(r(z(l.type)),1)]),_:2},1032,["type"])])],2))),128))])])])]),e("div",be,[t[11]||(t[11]=e("h2",null,"API文档",-1)),e("div",he,[t[10]||(t[10]=e("h3",null,"Webhook 配置",-1)),e("div",ye,[e("p",null,[t[7]||(t[7]=m("Webhook URL: ",-1)),e("code",null,r(T.value),1)]),o(k,{type:"text",onClick:S},{default:c(()=>[...t[8]||(t[8]=[m("复制",-1)])]),_:1})]),e("div",fe,[t[9]||(t[9]=e("h4",null,"事件类型",-1)),o(E,{data:D.value,style:{width:"100%"}},{default:c(()=>[o(w,{prop:"event",label:"事件"}),o(w,{prop:"description",label:"描述"}),o(w,{prop:"enabled",label:"状态"},{default:c(l=>[o(b,{modelValue:l.row.enabled,"onUpdate:modelValue":n=>l.row.enabled=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["data"])])])])])])}}});const Ce=H(ke,[["__scopeId","data-v-fd2c0bd0"]]);export{Ce as default};
