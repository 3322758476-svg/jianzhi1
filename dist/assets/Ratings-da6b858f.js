import{d as ne,B as q,r as v,C as ie,o as de,c as m,a as s,b as a,w as l,i as d,k as c,t as o,I as T,F as x,e as k,p as C,n as r,V as L,E as f,_ as ce}from"./index-d856f604.js";const re={class:"ratings-container"},ue={class:"ratings-content"},me={class:"stats-section"},_e={class:"stat-item"},pe={class:"stat-value"},ve={class:"stat-item"},ge={class:"stat-value"},fe={class:"stat-item"},ye={class:"stat-value"},be={class:"stat-item"},he={class:"stat-value"},Ve={class:"tabs-section"},xe={class:"ratings-list"},ke={key:0,class:"empty-state"},we={class:"rating-header"},Re={class:"rating-target"},Te={class:"target-info"},Ce={class:"target-name"},je={class:"target-type"},ze={class:"rating-meta"},Ue={class:"rating-score"},Be={class:"rating-time"},Fe={class:"rating-content"},De={class:"rating-title"},$e={class:"rating-comment"},Ne={key:0,class:"rating-tags"},Ie={class:"rating-footer"},Ee={class:"job-info"},Me={class:"rating-actions"},qe={class:"ratings-list"},Ae={key:0,class:"empty-state"},Oe={class:"rating-header"},Se={class:"rating-target"},Le={class:"target-info"},Ge={class:"target-name"},He={class:"target-type"},Je={class:"rating-meta"},Ke={class:"rating-score"},Pe={class:"rating-time"},Qe={class:"rating-content"},We={class:"rating-title"},Xe={class:"rating-comment"},Ye={key:0,class:"rating-tags"},Ze={class:"rating-footer"},et={class:"job-info"},tt={class:"rating-actions"},st={class:"ratings-list"},at={key:0,class:"empty-state"},lt={class:"pending-header"},ot={class:"pending-info"},nt={class:"pending-details"},it={class:"pending-title"},dt={class:"pending-target"},ct={class:"pending-time"},rt=ne({__name:"Ratings",setup(ut){const j=q({totalRatings:15,averageRating:4.5,receivedRatings:8,givenRatings:7}),F=v("given"),y=v([{id:"1",score:5,title:"非常专业的企业",comment:"工作环境很好，同事都很友好，学到了很多实用的技能。",tags:["专业","友好","成长"],time:"2024-10-20",jobTitle:"前端开发实习生",target:{name:"字节跳动",type:"company",avatar:""}},{id:"2",score:4,title:"不错的实习经历",comment:"项目很有挑战性，导师指导很耐心。",tags:["挑战","指导"],time:"2024-09-15",jobTitle:"数据分析实习生",target:{name:"阿里巴巴",type:"company",avatar:""}}]),A=v([{id:"3",score:5,title:"优秀的学生",comment:"工作认真负责，学习能力强，能够快速适应工作环境。",tags:["认真","学习能力强","适应快"],time:"2024-10-18",jobTitle:"前端开发实习生",from:{name:"张经理",type:"company",avatar:""}},{id:"4",score:4,title:"表现良好",comment:"沟通能力不错，能够按时完成任务。",tags:["沟通好","守时"],time:"2024-09-10",jobTitle:"新媒体运营",from:{name:"李总监",type:"company",avatar:""}}]),z=v([{id:"5",jobTitle:"英语家教",completeTime:"2024-10-22",target:{name:"王同学",type:"student",avatar:""}},{id:"6",jobTitle:"餐厅服务员",completeTime:"2024-10-21",target:{name:"海底捞",type:"company",avatar:""}}]),b=v(!1),w=v(!1),D=v(),n=q({score:0,title:"",comment:"",tags:[],anonymous:!1}),h=q({content:""}),g=v(null),U=v("create"),G=["专业","友好","耐心","认真","守时","沟通好","学习能力强","成长","挑战","指导","环境好","待遇优","灵活"],H={score:[{required:!0,message:"请选择评分",trigger:"change"}],title:[{required:!0,message:"请输入评价标题",trigger:"blur"},{min:5,max:50,message:"标题长度在 5 到 50 个字符",trigger:"blur"}],comment:[{required:!0,message:"请输入评价内容",trigger:"blur"},{min:10,max:500,message:"内容长度在 10 到 500 个字符",trigger:"blur"}]},J=ie(()=>U.value==="create"?"创建评价":"编辑评价"),K=i=>{F.value=i.paneName},P=i=>{g.value=i,U.value="create",Object.assign(n,{score:0,title:"",comment:"",tags:[],anonymous:!1}),b.value=!0},Q=i=>{g.value=i,U.value="edit",Object.assign(n,{score:i.score,title:i.title,comment:i.comment,tags:[...i.tags],anonymous:!1}),b.value=!0},W=async i=>{try{await L.confirm("确定要删除这条评价吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=y.value.findIndex(_=>_.id===i.id);t>-1&&(y.value.splice(t,1),f.success("评价删除成功"))}catch{}},X=i=>{g.value=i,h.content="",w.value=!0},Y=async i=>{try{await L.confirm("确定要举报这条评价吗？","举报评价",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),f.success("举报已提交，我们会尽快处理")}catch{}},Z=async()=>{if(D.value)try{if(await D.value.validate(),U.value==="create"){const i={id:Date.now().toString(),score:n.score,title:n.title,comment:n.comment,tags:n.tags,time:new Date().toLocaleDateString("zh-CN"),jobTitle:g.value.jobTitle,target:g.value.target};y.value.unshift(i);const t=z.value.findIndex(_=>_.id===g.value.id);t>-1&&z.value.splice(t,1),f.success("评价提交成功")}else{const i=y.value.find(t=>t.id===g.value.id);i&&(Object.assign(i,{score:n.score,title:n.title,comment:n.comment,tags:n.tags}),f.success("评价更新成功"))}b.value=!1}catch{f.error("请完善评价信息")}},ee=()=>{if(!h.content.trim()){f.warning("请输入回复内容");return}f.success("回复提交成功"),w.value=!1,h.content=""};return de(()=>{}),(i,t)=>{const _=d("el-card"),B=d("el-col"),te=d("el-row"),$=d("el-empty"),N=d("el-avatar"),R=d("el-tag"),I=d("el-rate"),p=d("el-button"),E=d("el-tab-pane"),se=d("el-tabs"),V=d("el-form-item"),M=d("el-input"),ae=d("el-option"),le=d("el-select"),oe=d("el-switch"),O=d("el-form"),S=d("el-dialog");return c(),m("div",re,[t[25]||(t[25]=s("div",{class:"ratings-header"},[s("h2",null,"评价管理"),s("p",null,"查看和管理您的评价记录")],-1)),s("div",ue,[s("div",me,[a(te,{gutter:20},{default:l(()=>[a(B,{span:6},{default:l(()=>[a(_,{class:"stat-card"},{default:l(()=>[s("div",_e,[s("div",pe,o(j.totalRatings),1),t[11]||(t[11]=s("div",{class:"stat-label"},"总评价数",-1))])]),_:1})]),_:1}),a(B,{span:6},{default:l(()=>[a(_,{class:"stat-card"},{default:l(()=>[s("div",ve,[s("div",ge,o(j.averageRating.toFixed(1)),1),t[12]||(t[12]=s("div",{class:"stat-label"},"平均评分",-1))])]),_:1})]),_:1}),a(B,{span:6},{default:l(()=>[a(_,{class:"stat-card"},{default:l(()=>[s("div",fe,[s("div",ye,o(j.receivedRatings),1),t[13]||(t[13]=s("div",{class:"stat-label"},"收到评价",-1))])]),_:1})]),_:1}),a(B,{span:6},{default:l(()=>[a(_,{class:"stat-card"},{default:l(()=>[s("div",be,[s("div",he,o(j.givenRatings),1),t[14]||(t[14]=s("div",{class:"stat-label"},"给出评价",-1))])]),_:1})]),_:1})]),_:1})]),s("div",Ve,[a(se,{modelValue:F.value,"onUpdate:modelValue":t[0]||(t[0]=e=>F.value=e),onTabClick:K},{default:l(()=>[a(E,{label:"我给出的评价",name:"given"},{default:l(()=>[s("div",xe,[y.value.length===0?(c(),m("div",ke,[a($,{description:"暂无评价记录"})])):T("",!0),(c(!0),m(x,null,k(y.value,e=>(c(),C(_,{key:e.id,class:"rating-card"},{default:l(()=>[s("div",we,[s("div",Re,[a(N,{size:40,src:e.target.avatar},null,8,["src"]),s("div",Te,[s("div",Ce,o(e.target.name),1),s("div",je,[a(R,{type:e.target.type==="company"?"success":"primary",size:"small"},{default:l(()=>[r(o(e.target.type==="company"?"企业":"学生"),1)]),_:2},1032,["type"])])])]),s("div",ze,[s("div",Ue,[a(I,{modelValue:e.score,"onUpdate:modelValue":u=>e.score=u,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} 分"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Be,o(e.time),1)])]),s("div",Fe,[s("div",De,o(e.title),1),s("div",$e,o(e.comment),1),e.tags.length>0?(c(),m("div",Ne,[(c(!0),m(x,null,k(e.tags,u=>(c(),C(R,{key:u,size:"small",type:"info"},{default:l(()=>[r(o(u),1)]),_:2},1024))),128))])):T("",!0)]),s("div",Ie,[s("div",Ee,[s("span",null,"相关岗位："+o(e.jobTitle),1)]),s("div",Me,[a(p,{type:"text",size:"small",onClick:u=>Q(e)},{default:l(()=>[...t[15]||(t[15]=[r(" 编辑 ",-1)])]),_:1},8,["onClick"]),a(p,{type:"text",size:"small",onClick:u=>W(e)},{default:l(()=>[...t[16]||(t[16]=[r(" 删除 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))])]),_:1}),a(E,{label:"我收到的评价",name:"received"},{default:l(()=>[s("div",qe,[A.value.length===0?(c(),m("div",Ae,[a($,{description:"暂无收到的评价"})])):T("",!0),(c(!0),m(x,null,k(A.value,e=>(c(),C(_,{key:e.id,class:"rating-card"},{default:l(()=>[s("div",Oe,[s("div",Se,[a(N,{size:40,src:e.from.avatar},null,8,["src"]),s("div",Le,[s("div",Ge,o(e.from.name),1),s("div",He,[a(R,{type:e.from.type==="company"?"success":"primary",size:"small"},{default:l(()=>[r(o(e.from.type==="company"?"企业":"学生"),1)]),_:2},1032,["type"])])])]),s("div",Je,[s("div",Ke,[a(I,{modelValue:e.score,"onUpdate:modelValue":u=>e.score=u,disabled:"","show-score":"","text-color":"#ff9900","score-template":"{value} 分"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Pe,o(e.time),1)])]),s("div",Qe,[s("div",We,o(e.title),1),s("div",Xe,o(e.comment),1),e.tags.length>0?(c(),m("div",Ye,[(c(!0),m(x,null,k(e.tags,u=>(c(),C(R,{key:u,size:"small",type:"info"},{default:l(()=>[r(o(u),1)]),_:2},1024))),128))])):T("",!0)]),s("div",Ze,[s("div",et,[s("span",null,"相关岗位："+o(e.jobTitle),1)]),s("div",tt,[a(p,{type:"text",size:"small",onClick:u=>X(e)},{default:l(()=>[...t[17]||(t[17]=[r(" 回复 ",-1)])]),_:1},8,["onClick"]),a(p,{type:"text",size:"small",onClick:u=>Y(e)},{default:l(()=>[...t[18]||(t[18]=[r(" 举报 ",-1)])]),_:1},8,["onClick"])])])]),_:2},1024))),128))])]),_:1}),a(E,{label:"待评价",name:"pending"},{default:l(()=>[s("div",st,[z.value.length===0?(c(),m("div",at,[a($,{description:"暂无待评价记录"})])):T("",!0),(c(!0),m(x,null,k(z.value,e=>(c(),C(_,{key:e.id,class:"pending-rating-card"},{default:l(()=>[s("div",lt,[s("div",ot,[a(N,{size:50,src:e.target.avatar},null,8,["src"]),s("div",nt,[s("div",it,o(e.jobTitle),1),s("div",dt,[r(" 评价对象："+o(e.target.name)+" ",1),a(R,{type:e.target.type==="company"?"success":"primary",size:"small"},{default:l(()=>[r(o(e.target.type==="company"?"企业":"学生"),1)]),_:2},1032,["type"])]),s("div",ct,"完成时间："+o(e.completeTime),1)])]),a(p,{type:"primary",onClick:u=>P(e)},{default:l(()=>[...t[19]||(t[19]=[r(" 立即评价 ",-1)])]),_:1},8,["onClick"])])]),_:2},1024))),128))])]),_:1})]),_:1},8,["modelValue"])])]),a(S,{modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=e=>b.value=e),title:J.value,width:"600px"},{footer:l(()=>[a(p,{onClick:t[6]||(t[6]=e=>b.value=!1)},{default:l(()=>[...t[21]||(t[21]=[r("取消",-1)])]),_:1}),a(p,{type:"primary",onClick:Z},{default:l(()=>[...t[22]||(t[22]=[r("提交评价",-1)])]),_:1})]),default:l(()=>[a(O,{ref_key:"ratingFormRef",ref:D,model:n,rules:H,"label-width":"100px"},{default:l(()=>[a(V,{label:"评分",prop:"score"},{default:l(()=>[a(I,{modelValue:n.score,"onUpdate:modelValue":t[1]||(t[1]=e=>n.score=e),colors:["#99A9BF","#F7BA2A","#FF9900"],"show-score":"","text-color":"#ff9900"},null,8,["modelValue"])]),_:1}),a(V,{label:"评价标题",prop:"title"},{default:l(()=>[a(M,{modelValue:n.title,"onUpdate:modelValue":t[2]||(t[2]=e=>n.title=e),placeholder:"请输入评价标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(V,{label:"评价内容",prop:"comment"},{default:l(()=>[a(M,{modelValue:n.comment,"onUpdate:modelValue":t[3]||(t[3]=e=>n.comment=e),type:"textarea",rows:4,placeholder:"请输入详细的评价内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),a(V,{label:"评价标签"},{default:l(()=>[a(le,{modelValue:n.tags,"onUpdate:modelValue":t[4]||(t[4]=e=>n.tags=e),multiple:"",placeholder:"选择评价标签",style:{width:"100%"}},{default:l(()=>[(c(),m(x,null,k(G,e=>a(ae,{key:e,label:e,value:e},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),a(V,{label:"是否匿名"},{default:l(()=>[a(oe,{modelValue:n.anonymous,"onUpdate:modelValue":t[5]||(t[5]=e=>n.anonymous=e)},null,8,["modelValue"]),t[20]||(t[20]=s("span",{class:"anonymous-tip"},"匿名评价将不显示您的个人信息",-1))]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),a(S,{modelValue:w.value,"onUpdate:modelValue":t[10]||(t[10]=e=>w.value=e),title:"回复评价",width:"500px"},{footer:l(()=>[a(p,{onClick:t[9]||(t[9]=e=>w.value=!1)},{default:l(()=>[...t[23]||(t[23]=[r("取消",-1)])]),_:1}),a(p,{type:"primary",onClick:ee},{default:l(()=>[...t[24]||(t[24]=[r("提交回复",-1)])]),_:1})]),default:l(()=>[a(O,{model:h,"label-width":"80px"},{default:l(()=>[a(V,{label:"回复内容"},{default:l(()=>[a(M,{modelValue:h.content,"onUpdate:modelValue":t[8]||(t[8]=e=>h.content=e),type:"textarea",rows:3,placeholder:"请输入回复内容",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const _t=ce(rt,[["__scopeId","data-v-d32dc0aa"]]);export{_t as default};
