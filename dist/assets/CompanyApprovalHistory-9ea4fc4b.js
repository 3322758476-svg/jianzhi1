import{C as $}from"./CompanySidebar-2b3a57ff.js";import{d as q,r as w,B as j,o as G,c as J,b as e,a as p,w as a,i as n,j as K,k as z,n as r,l as M,a8 as Q,W as X,f as Z,p as ee,t as y,P as te,_ as ae}from"./index-d856f604.js";const le={class:"company-layout"},oe={class:"company-main"},ne={class:"company-header"},se={class:"header-left"},pe={class:"header-actions"},re={class:"history-container"},de={class:"card-header"},ie={class:"pagination-container"},ue=q({__name:"CompanyApprovalHistory",setup(ce){const v=w(!1),f=w([]),d=j({type:"",status:"",dateRange:[]}),i=j({current:1,size:10,total:0}),k=l=>({job_approval:"primary",application_approval:"success",payment_approval:"warning"})[l]||"info",V=l=>({job_approval:"岗位审批",application_approval:"申请审批",payment_approval:"支付审批"})[l]||l,A=l=>({approved:"success",rejected:"danger",pending:"warning"})[l]||"info",T=l=>({approved:"已通过",rejected:"已拒绝",pending:"待审批"})[l]||l,D=l=>l==="approved"?"text-success":l==="rejected"?"text-danger":"text-warning",S=l=>({approved:"通过",rejected:"拒绝",pending:"待审批"})[l]||l,u=async()=>{v.value=!0;try{f.value=[{id:"APP001",type:"job_approval",title:"前端开发工程师岗位发布",applicant:"张三",approver:"李四",status:"approved",result:"approved",createdAt:"2024-01-15 09:30:00",approvedAt:"2024-01-15 14:20:00"},{id:"APP002",type:"application_approval",title:"学生王五的实习申请",applicant:"王五",approver:"赵六",status:"rejected",result:"rejected",createdAt:"2024-01-14 16:45:00",approvedAt:"2024-01-15 10:15:00"}],i.total=f.value.length}catch(l){console.error("加载审批历史失败:",l)}finally{v.value=!1}},H=()=>{console.log("查询审批历史:",d),u()},P=()=>{Object.assign(d,{type:"",status:"",dateRange:[]}),u()},R=l=>{console.log("查看审批详情:",l)},B=()=>{console.log("导出审批历史")},U=()=>{u()},Y=l=>{i.size=l,u()},N=l=>{i.current=l,u()};return G(()=>{u()}),(l,t)=>{const g=n("el-breadcrumb-item"),F=n("el-breadcrumb"),b=n("el-icon"),_=n("el-button"),c=n("el-option"),C=n("el-select"),m=n("el-form-item"),I=n("el-date-picker"),L=n("el-form"),h=n("el-card"),s=n("el-table-column"),x=n("el-tag"),E=n("el-table"),O=n("el-pagination"),W=K("loading");return z(),J("div",le,[e($),p("div",oe,[p("div",ne,[p("div",se,[t[8]||(t[8]=p("h1",null,"审批历史记录",-1)),e(F,{separator:"/"},{default:a(()=>[e(g,{to:{path:"/company/dashboard"}},{default:a(()=>[...t[5]||(t[5]=[r("首页",-1)])]),_:1}),e(g,null,{default:a(()=>[...t[6]||(t[6]=[r("审批流程",-1)])]),_:1}),e(g,null,{default:a(()=>[...t[7]||(t[7]=[r("审批历史",-1)])]),_:1})]),_:1})]),p("div",pe,[e(_,{onClick:B},{default:a(()=>[e(b,null,{default:a(()=>[e(M(Q))]),_:1}),t[9]||(t[9]=r(" 导出记录 ",-1))]),_:1})])]),p("div",re,[e(h,{class:"filter-card"},{default:a(()=>[e(L,{model:d,inline:""},{default:a(()=>[e(m,{label:"审批类型"},{default:a(()=>[e(C,{modelValue:d.type,"onUpdate:modelValue":t[0]||(t[0]=o=>d.type=o),placeholder:"请选择类型",clearable:""},{default:a(()=>[e(c,{label:"岗位审批",value:"job_approval"}),e(c,{label:"申请审批",value:"application_approval"}),e(c,{label:"支付审批",value:"payment_approval"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"审批状态"},{default:a(()=>[e(C,{modelValue:d.status,"onUpdate:modelValue":t[1]||(t[1]=o=>d.status=o),placeholder:"请选择状态",clearable:""},{default:a(()=>[e(c,{label:"通过",value:"approved"}),e(c,{label:"拒绝",value:"rejected"}),e(c,{label:"待审批",value:"pending"})]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"时间范围"},{default:a(()=>[e(I,{modelValue:d.dateRange,"onUpdate:modelValue":t[2]||(t[2]=o=>d.dateRange=o),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(m,null,{default:a(()=>[e(_,{type:"primary",onClick:H},{default:a(()=>[...t[10]||(t[10]=[r("查询",-1)])]),_:1}),e(_,{onClick:P},{default:a(()=>[...t[11]||(t[11]=[r("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(h,null,{header:a(()=>[p("div",de,[t[13]||(t[13]=p("span",null,"审批历史记录",-1)),e(_,{type:"text",onClick:U},{default:a(()=>[e(b,null,{default:a(()=>[e(M(X))]),_:1}),t[12]||(t[12]=r(" 刷新 ",-1))]),_:1})])]),default:a(()=>[Z((z(),ee(E,{data:f.value},{default:a(()=>[e(s,{prop:"id",label:"审批ID",width:"100"}),e(s,{prop:"type",label:"审批类型",width:"120"},{default:a(({row:o})=>[e(x,{type:k(o.type)},{default:a(()=>[r(y(V(o.type)),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"title",label:"审批事项","min-width":"200"}),e(s,{prop:"applicant",label:"申请人",width:"120"}),e(s,{prop:"approver",label:"审批人",width:"120"}),e(s,{prop:"status",label:"审批状态",width:"100"},{default:a(({row:o})=>[e(x,{type:A(o.status)},{default:a(()=>[r(y(T(o.status)),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"result",label:"审批结果",width:"100"},{default:a(({row:o})=>[p("span",{class:te(D(o.result))},y(S(o.result)),3)]),_:1}),e(s,{prop:"createdAt",label:"申请时间",width:"150"}),e(s,{prop:"approvedAt",label:"审批时间",width:"150"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:a(({row:o})=>[e(_,{size:"small",type:"text",onClick:_e=>R(o)},{default:a(()=>[...t[14]||(t[14]=[r("查看详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[W,v.value]]),p("div",ie,[e(O,{"current-page":i.current,"onUpdate:currentPage":t[3]||(t[3]=o=>i.current=o),"page-size":i.size,"onUpdate:pageSize":t[4]||(t[4]=o=>i.size=o),"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Y,onCurrentChange:N},null,8,["current-page","page-size","total"])])]),_:1})])])])}}});const fe=ae(ue,[["__scopeId","data-v-505437fa"]]);export{fe as default};
