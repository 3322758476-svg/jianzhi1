import{d as R,r as V,B,c as w,b as e,a as d,w as o,h as E,i as s,k,n as m,l as j,K as M,R as S,F as I,e as $,E as h,_ as A}from"./index-d856f604.js";import{C as D}from"./CompanySidebar-2b3a57ff.js";import{c as K}from"./companyDataService-d2da87ef.js";const L={class:"company-layout"},O={class:"company-main"},P={class:"company-header"},z={class:"header-left"},G={class:"header-actions"},H={class:"job-form-container"},Q={class:"card-header"},W=R({__name:"CompanyJobNew",setup(X){const C=E(),_=V(!1),c=V(),t=B({title:"",salary:"",location:"",workTime:"",recruitCount:1,description:"",tags:[],category:"技术",jobType:"实习"}),T={title:[{required:!0,message:"请输入岗位标题",trigger:"blur"}],salary:[{required:!0,message:"请输入薪资范围",trigger:"blur"}],location:[{required:!0,message:"请输入工作地点",trigger:"blur"}],workTime:[{required:!0,message:"请输入工作时间",trigger:"blur"}],description:[{required:!0,message:"请输入岗位描述",trigger:"blur"}],category:[{required:!0,message:"请选择岗位分类",trigger:"change"}],jobType:[{required:!0,message:"请选择工作类型",trigger:"change"}]},x=["前端开发","后端开发","移动端","UI设计","产品经理","运营","市场","销售","客服","行政","财务","React","Vue","Angular","Node.js","Python","Java"],U=async()=>{if(c.value)try{await c.value.validate(),_.value=!0;const r={全职:"full_time",兼职:"part_time",实习:"internship",远程:"remote"};await K.createJob({title:t.title,description:t.description,salary_range:t.salary,work_location:t.location,work_hours:t.workTime,recruit_count:t.recruitCount,skills_required:t.tags,category:t.category,job_type:r[t.jobType]||"full_time",status:"active"}),h.success("岗位发布成功"),C.push("/company/jobs")}catch(r){console.error("发布岗位失败 - 详细错误信息:",{message:r.message,details:r.details,hint:r.hint,code:r.code,originalError:r});let l="发布失败";r&&r.message?l=r.message:r&&typeof r=="object"&&(l=JSON.stringify(r,null,2)),h.error("发布失败: "+l)}finally{_.value=!1}};return(r,l)=>{const b=s("el-breadcrumb-item"),q=s("el-breadcrumb"),g=s("el-icon"),y=s("el-button"),i=s("el-input"),u=s("el-form-item"),p=s("el-col"),v=s("el-row"),N=s("el-input-number"),n=s("el-option"),f=s("el-select"),J=s("el-form"),F=s("el-card");return k(),w("div",L,[e(D),d("div",O,[d("div",P,[d("div",z,[l[13]||(l[13]=d("h1",null,"发布新岗位",-1)),e(q,{separator:"/"},{default:o(()=>[e(b,{to:{path:"/company/dashboard"}},{default:o(()=>[...l[10]||(l[10]=[m("首页",-1)])]),_:1}),e(b,{to:{path:"/company/jobs"}},{default:o(()=>[...l[11]||(l[11]=[m("岗位管理",-1)])]),_:1}),e(b,null,{default:o(()=>[...l[12]||(l[12]=[m("发布新岗位",-1)])]),_:1})]),_:1})]),d("div",G,[e(y,{onClick:l[0]||(l[0]=a=>r.$router.go(-1))},{default:o(()=>[e(g,null,{default:o(()=>[e(j(M))]),_:1}),l[14]||(l[14]=m(" 返回 ",-1))]),_:1})])]),d("div",H,[e(F,{class:"job-form-card"},{header:o(()=>[d("div",Q,[l[16]||(l[16]=d("span",{class:"card-title"},"岗位信息",-1)),e(y,{type:"primary",onClick:U,loading:_.value},{default:o(()=>[e(g,null,{default:o(()=>[e(j(S))]),_:1}),l[15]||(l[15]=m(" 发布岗位 ",-1))]),_:1},8,["loading"])])]),default:o(()=>[e(J,{ref_key:"jobFormRef",ref:c,model:t,rules:T,"label-width":"120px","label-position":"left"},{default:o(()=>[e(u,{label:"岗位标题",prop:"title"},{default:o(()=>[e(i,{modelValue:t.title,"onUpdate:modelValue":l[1]||(l[1]=a=>t.title=a),placeholder:"请输入岗位标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(u,{label:"薪资范围",prop:"salary"},{default:o(()=>[e(i,{modelValue:t.salary,"onUpdate:modelValue":l[2]||(l[2]=a=>t.salary=a),placeholder:"例如：5k-10k/月",maxlength:"20"},null,8,["modelValue"])]),_:1}),e(v,{gutter:20},{default:o(()=>[e(p,{span:12},{default:o(()=>[e(u,{label:"工作地点",prop:"location"},{default:o(()=>[e(i,{modelValue:t.location,"onUpdate:modelValue":l[3]||(l[3]=a=>t.location=a),placeholder:"例如：北京市朝阳区",maxlength:"50"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:o(()=>[e(u,{label:"工作时间",prop:"workTime"},{default:o(()=>[e(i,{modelValue:t.workTime,"onUpdate:modelValue":l[4]||(l[4]=a=>t.workTime=a),placeholder:"例如：9:00-18:00",maxlength:"20"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(u,{label:"招聘人数",prop:"recruitCount"},{default:o(()=>[e(N,{modelValue:t.recruitCount,"onUpdate:modelValue":l[5]||(l[5]=a=>t.recruitCount=a),min:1,max:100,"controls-position":"right"},null,8,["modelValue"])]),_:1}),e(u,{label:"岗位描述",prop:"description"},{default:o(()=>[e(i,{modelValue:t.description,"onUpdate:modelValue":l[6]||(l[6]=a=>t.description=a),type:"textarea",rows:6,placeholder:"请输入详细的岗位描述，包括工作职责、任职要求等",maxlength:"1000","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(u,{label:"技能标签"},{default:o(()=>[e(f,{modelValue:t.tags,"onUpdate:modelValue":l[7]||(l[7]=a=>t.tags=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请选择或输入技能标签",style:{width:"100%"}},{default:o(()=>[(k(),w(I,null,$(x,a=>e(n,{key:a,label:a,value:a},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(v,{gutter:20},{default:o(()=>[e(p,{span:12},{default:o(()=>[e(u,{label:"岗位分类",prop:"category"},{default:o(()=>[e(f,{modelValue:t.category,"onUpdate:modelValue":l[8]||(l[8]=a=>t.category=a),placeholder:"请选择分类",style:{width:"100%"}},{default:o(()=>[e(n,{label:"技术类",value:"技术"}),e(n,{label:"产品类",value:"产品"}),e(n,{label:"设计类",value:"设计"}),e(n,{label:"运营类",value:"运营"}),e(n,{label:"市场类",value:"市场"}),e(n,{label:"销售类",value:"销售"}),e(n,{label:"职能类",value:"职能"}),e(n,{label:"其他",value:"其他"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{span:12},{default:o(()=>[e(u,{label:"工作类型",prop:"jobType"},{default:o(()=>[e(f,{modelValue:t.jobType,"onUpdate:modelValue":l[9]||(l[9]=a=>t.jobType=a),placeholder:"请选择类型",style:{width:"100%"}},{default:o(()=>[e(n,{label:"实习",value:"实习"}),e(n,{label:"兼职",value:"兼职"}),e(n,{label:"全职",value:"全职"}),e(n,{label:"远程",value:"远程"})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])])])}}});const le=A(W,[["__scopeId","data-v-3d191e68"]]);export{le as default};
