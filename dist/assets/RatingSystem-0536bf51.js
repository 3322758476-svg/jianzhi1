import{d as X,u as Y,B as D,r as u,C as E,o as Z,c as d,a as e,b as l,w as i,i as n,k as r,t as o,F as C,e as j,I as m,p as ee,n as k,E as I,_ as te}from"./index-d856f604.js";const se={class:"rating-system"},le={class:"container"},ae={class:"rating-content"},oe={class:"overview-content"},ne={class:"rating-stats"},ie={class:"stat-item"},re={class:"stat-value"},de={class:"stat-item"},ce={class:"stat-value"},ue={class:"stat-item"},pe={class:"stat-value"},_e={class:"stat-item"},ve={class:"stat-value"},me={class:"rating-breakdown"},ge={class:"breakdown-list"},fe={class:"rating-label"},ye={class:"rating-count"},he={class:"card-header"},be={class:"filter-actions"},we={class:"ratings-list"},xe={key:0,class:"empty-state"},ke={class:"rating-header"},Ve={class:"user-info"},Re={class:"user-details"},Ce={class:"user-name"},je={class:"rating-meta"},Ie={class:"rating-type"},Ne={class:"rating-time"},Se={class:"rating-score"},Ue={class:"rating-content"},ze={class:"rating-title"},Be={class:"rating-comment"},De={key:0,class:"rating-tags"},Ee={key:1,class:"job-info"},Fe={class:"job-title"},Pe={class:"job-company"},Te={key:2,class:"rating-reply"},Ae={class:"reply-header"},Le={class:"reply-time"},Me={class:"reply-content"},$e={key:3,class:"reply-actions"},Je={class:"pagination-section"},qe=X({__name:"RatingSystem",setup(Ge){Y();const g=D({averageRating:4.8,totalRatings:24,positiveRatings:22,responseRate:85}),F=u([{rating:5,count:18,percentage:75},{rating:4,count:4,percentage:17},{rating:3,count:1,percentage:4},{rating:2,count:1,percentage:4},{rating:1,count:0,percentage:0}]),P=u([{id:"1",type:"received",score:5,title:"工作认真负责",comment:"这位同学工作非常认真负责，按时完成任务，沟通能力也很强。",userName:"张经理",avatar:"https://via.placeholder.com/40x40/409EFF/ffffff?text=张",time:"2025-10-20",tags:["认真负责","沟通良好","按时完成"],jobInfo:{title:"前端开发实习生",company:"腾讯科技"},reply:{content:"感谢您的认可，我会继续努力的！",time:"2025-10-21"}},{id:"2",type:"given",score:4,title:"公司环境不错",comment:"公司工作环境很好，同事都很友好，工作内容也很有挑战性。",userName:"美团外卖",avatar:"https://via.placeholder.com/40x40/67C23A/ffffff?text=美",time:"2025-10-18",tags:["环境好","同事友好","有挑战"],jobInfo:{title:"配送员",company:"美团外卖"}},{id:"3",type:"received",score:5,title:"学习能力很强",comment:"这位同学学习能力很强，能够快速掌握新技能，工作态度积极。",userName:"李主管",avatar:"https://via.placeholder.com/40x40/E6A23C/ffffff?text=李",time:"2025-10-15",tags:["学习能力强","态度积极","快速上手"],jobInfo:{title:"Java开发实习生",company:"阿里巴巴"}}]),f=u("all"),y=u("all"),h=u(1),b=u(10),_=u(!1),V=u(!1),w=u(null),p=D({content:""}),x=E(()=>{let a=P.value;return f.value!=="all"&&(a=a.filter(t=>t.type===f.value)),y.value!=="all"&&(a=a.filter(t=>t.score===parseInt(y.value))),a});E(()=>{const a=(h.value-1)*b.value,t=a+b.value;return x.value.slice(a,t)});const T=a=>{w.value=a,p.content="",_.value=!0},A=async()=>{if(!p.content.trim()){I.warning("请输入回复内容");return}V.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),w.value&&(w.value.reply={content:p.content,time:new Date().toLocaleDateString()}),I.success("回复成功"),_.value=!1,p.content=""}catch{I.error("回复失败")}finally{V.value=!1}},L=a=>{h.value=a};return Z(()=>{console.log("评价系统页面加载完成")}),(a,t)=>{var U;const M=n("el-progress"),N=n("el-card"),c=n("el-option"),S=n("el-select"),$=n("el-empty"),J=n("el-avatar"),q=n("el-rate"),G=n("el-tag"),R=n("el-button"),H=n("el-pagination"),K=n("el-input"),O=n("el-form-item"),Q=n("el-form"),W=n("el-dialog");return r(),d("div",se,[e("div",le,[t[15]||(t[15]=e("div",{class:"page-header"},[e("h1",null,"评价系统"),e("p",null,"查看和管理您的评价记录")],-1)),e("div",ae,[l(N,{class:"overview-card"},{default:i(()=>[e("div",oe,[e("div",ne,[e("div",ie,[e("div",re,o(g.averageRating),1),t[7]||(t[7]=e("div",{class:"stat-label"},"平均评分",-1))]),e("div",de,[e("div",ce,o(g.totalRatings),1),t[8]||(t[8]=e("div",{class:"stat-label"},"总评价数",-1))]),e("div",ue,[e("div",pe,o(g.positiveRatings),1),t[9]||(t[9]=e("div",{class:"stat-label"},"好评数",-1))]),e("div",_e,[e("div",ve,o(g.responseRate)+"%",1),t[10]||(t[10]=e("div",{class:"stat-label"},"回复率",-1))])]),e("div",me,[t[11]||(t[11]=e("h3",null,"评分分布",-1)),e("div",ge,[(r(!0),d(C,null,j(F.value,s=>(r(),d("div",{key:s.rating,class:"breakdown-item"},[e("span",fe,o(s.rating)+"星",1),l(M,{percentage:s.percentage,"show-text":!1,"stroke-width":8},null,8,["percentage"]),e("span",ye,o(s.count),1)]))),128))])])])]),_:1}),l(N,{class:"ratings-card"},{header:i(()=>[e("div",he,[t[12]||(t[12]=e("h3",null,"评价记录",-1)),e("div",be,[l(S,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),placeholder:"评价类型",style:{width:"150px"}},{default:i(()=>[l(c,{label:"全部评价",value:"all"}),l(c,{label:"收到的评价",value:"received"}),l(c,{label:"给出的评价",value:"given"})]),_:1},8,["modelValue"]),l(S,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),placeholder:"评分",style:{width:"120px"}},{default:i(()=>[l(c,{label:"全部",value:"all"}),l(c,{label:"5星",value:"5"}),l(c,{label:"4星",value:"4"}),l(c,{label:"3星",value:"3"}),l(c,{label:"2星",value:"2"}),l(c,{label:"1星",value:"1"})]),_:1},8,["modelValue"])])])]),default:i(()=>[e("div",we,[x.value.length===0?(r(),d("div",xe,[l($,{description:"暂无评价记录"})])):m("",!0),(r(!0),d(C,null,j(x.value,s=>{var z,B;return r(),d("div",{key:s.id,class:"rating-item"},[e("div",ke,[e("div",Ve,[l(J,{size:40,src:s.avatar},null,8,["src"]),e("div",Re,[e("div",Ce,o(s.userName),1),e("div",je,[e("span",Ie,o(s.type==="given"?"我给出的评价":"我收到的评价"),1),e("span",Ne,o(s.time),1)])])]),e("div",Se,[l(q,{modelValue:s.score,"onUpdate:modelValue":v=>s.score=v,disabled:"","show-score":"","text-color":"#ff9900"},null,8,["modelValue","onUpdate:modelValue"])])]),e("div",Ue,[e("div",ze,o(s.title),1),e("p",Be,o(s.comment),1),s.tags&&s.tags.length>0?(r(),d("div",De,[(r(!0),d(C,null,j(s.tags,v=>(r(),ee(G,{key:v,size:"small",type:"info"},{default:i(()=>[k(o(v),1)]),_:2},1024))),128))])):m("",!0),s.jobInfo?(r(),d("div",Ee,[e("div",Fe,"关联岗位："+o(s.jobInfo.title),1),e("div",Pe,o(s.jobInfo.company),1)])):m("",!0),s.reply?(r(),d("div",Te,[e("div",Ae,[t[13]||(t[13]=e("span",{class:"reply-label"},"回复：",-1)),e("span",Le,o((z=s.reply)==null?void 0:z.time),1)]),e("p",Me,o((B=s.reply)==null?void 0:B.content),1)])):m("",!0),s.type==="received"&&!s.reply?(r(),d("div",$e,[l(R,{type:"text",size:"small",onClick:v=>T(s)},{default:i(()=>[...t[14]||(t[14]=[k(" 回复评价 ",-1)])]),_:1},8,["onClick"])])):m("",!0)])])}),128))]),e("div",Je,[l(H,{"current-page":h.value,"onUpdate:currentPage":t[2]||(t[2]=s=>h.value=s),"page-size":b.value,"onUpdate:pageSize":t[3]||(t[3]=s=>b.value=s),total:x.value.length,layout:"prev, pager, next, jumper",onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1})])]),l(W,{modelValue:_.value,"onUpdate:modelValue":t[6]||(t[6]=s=>_.value=s),title:"回复评价 - "+(((U=w.value)==null?void 0:U.userName)||""),width:"500px"},{footer:i(()=>[l(R,{onClick:t[5]||(t[5]=s=>_.value=!1)},{default:i(()=>[...t[16]||(t[16]=[k("取消",-1)])]),_:1}),l(R,{type:"primary",onClick:A,loading:V.value},{default:i(()=>[...t[17]||(t[17]=[k(" 提交回复 ",-1)])]),_:1},8,["loading"])]),default:i(()=>[l(Q,{model:p,"label-width":"80px"},{default:i(()=>[l(O,{label:"回复内容"},{default:i(()=>[l(K,{modelValue:p.content,"onUpdate:modelValue":t[4]||(t[4]=s=>p.content=s),type:"textarea",rows:4,placeholder:"请输入回复内容",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Ke=te(qe,[["__scopeId","data-v-d77953b5"]]);export{Ke as default};
