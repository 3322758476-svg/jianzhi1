import{d as E,r as f,C as M,o as F,c as _,b as o,w as l,h as U,i as n,k as i,a as t,F as J,e as K,p as g,t as d,n as p,I as b,V as O,E as x,_ as R}from"./index-d856f604.js";const q={class:"applications-page"},G={class:"page-header"},H={class:"header-actions"},P={class:"applications-content"},Q={key:0,class:"applications-list"},W={class:"application-header"},X={class:"job-info"},Y={class:"job-title"},Z={class:"company-name"},ee={class:"apply-time"},te={class:"status-info"},se={class:"update-time"},ae={class:"application-details"},oe={class:"detail-item"},le={class:"value"},ne={class:"detail-item"},de={class:"value"},ie={class:"detail-item"},ce={class:"value"},re={key:0,class:"detail-item"},ue={class:"value feedback"},_e={class:"application-actions"},pe={key:1,class:"empty-state"},me=E({__name:"Applications",setup(ve){const A=U(),r=f(""),m=f("");f(!1);const v=f([]),h=M(()=>v.value.filter(a=>{const e=!r.value||a.jobTitle.toLowerCase().includes(r.value.toLowerCase())||a.companyName.toLowerCase().includes(r.value.toLowerCase()),u=!m.value||a.status===m.value;return e&&u}).sort((a,e)=>new Date(e.updatedAt).getTime()-new Date(a.updatedAt).getTime())),j=a=>({pending:"warning",viewed:"info",approved:"success",rejected:"danger",cancelled:"info"})[a]||"info",S=a=>({pending:"待处理",viewed:"已查看",approved:"已通过",rejected:"已拒绝",cancelled:"已取消"})[a]||a,T=a=>new Date(a).toLocaleDateString("zh-CN"),w=a=>new Date(a).toLocaleString("zh-CN"),V=a=>{A.push(`/jobs/${a}`)},D=async a=>{try{await O.confirm("确定要取消这个申请吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=v.value.findIndex(u=>u.id===a);e!==-1&&(v.value[e].status="cancelled",v.value[e].updatedAt=new Date().toISOString()),x.success("申请已取消")}catch{}},N=a=>{x.info("联系公司功能开发中")};return F(()=>{}),(a,e)=>{const u=n("el-input"),c=n("el-option"),B=n("el-select"),I=n("el-tag"),y=n("el-button"),k=n("el-card"),L=n("el-timeline-item"),$=n("el-timeline"),z=n("el-empty");return i(),_("div",q,[o(k,{class:"page-card"},{header:l(()=>[t("div",G,[e[3]||(e[3]=t("h2",null,"申请记录",-1)),t("div",H,[o(u,{modelValue:r.value,"onUpdate:modelValue":e[0]||(e[0]=s=>r.value=s),placeholder:"搜索职位名称或公司",style:{width:"200px","margin-right":"10px"},clearable:""},null,8,["modelValue"]),o(B,{modelValue:m.value,"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),placeholder:"筛选状态",clearable:""},{default:l(()=>[o(c,{label:"全部",value:""}),o(c,{label:"待处理",value:"pending"}),o(c,{label:"已查看",value:"viewed"}),o(c,{label:"已通过",value:"approved"}),o(c,{label:"已拒绝",value:"rejected"}),o(c,{label:"已取消",value:"cancelled"})]),_:1},8,["modelValue"])])])]),default:l(()=>[t("div",P,[h.value.length>0?(i(),_("div",Q,[o($,null,{default:l(()=>[(i(!0),_(J,null,K(h.value,s=>(i(),g(L,{key:s.id,timestamp:T(s.createdAt),placement:"top"},{default:l(()=>[o(k,{class:"application-card",shadow:"hover"},{default:l(()=>[t("div",W,[t("div",X,[t("h3",Y,d(s.jobTitle),1),t("p",Z,d(s.companyName),1),t("p",ee,"申请时间："+d(w(s.createdAt)),1)]),t("div",te,[o(I,{type:j(s.status)},{default:l(()=>[p(d(S(s.status)),1)]),_:2},1032,["type"]),t("p",se," 最后更新："+d(w(s.updatedAt)),1)])]),t("div",ae,[t("div",oe,[e[4]||(e[4]=t("span",{class:"label"},"申请职位：",-1)),t("span",le,d(s.jobTitle),1)]),t("div",ne,[e[5]||(e[5]=t("span",{class:"label"},"期望薪资：",-1)),t("span",de,d(s.expectedSalary||"面议"),1)]),t("div",ie,[e[6]||(e[6]=t("span",{class:"label"},"申请留言：",-1)),t("span",ce,d(s.message||"无"),1)]),s.feedback?(i(),_("div",re,[e[7]||(e[7]=t("span",{class:"label"},"公司反馈：",-1)),t("span",ue,d(s.feedback),1)])):b("",!0)]),t("div",_e,[o(y,{type:"primary",size:"small",onClick:C=>V(s.jobId)},{default:l(()=>[...e[8]||(e[8]=[p(" 查看职位 ",-1)])]),_:1},8,["onClick"]),s.status==="pending"?(i(),g(y,{key:0,type:"danger",size:"small",onClick:C=>D(s.id)},{default:l(()=>[...e[9]||(e[9]=[p(" 取消申请 ",-1)])]),_:1},8,["onClick"])):b("",!0),s.status==="approved"?(i(),g(y,{key:1,type:"success",size:"small",onClick:C=>N(s.companyId)},{default:l(()=>[...e[10]||(e[10]=[p(" 联系公司 ",-1)])]),_:1},8,["onClick"])):b("",!0)])]),_:2},1024)]),_:2},1032,["timestamp"]))),128))]),_:1})])):(i(),_("div",pe,[o(z,{description:"暂无申请记录"},{default:l(()=>[o(y,{type:"primary",onClick:e[2]||(e[2]=s=>a.$router.push("/jobs"))},{default:l(()=>[...e[11]||(e[11]=[p(" 去申请职位 ",-1)])]),_:1})]),_:1})]))])]),_:1})])}}});const fe=R(me,[["__scopeId","data-v-25801a15"]]);export{fe as default};
